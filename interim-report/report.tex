% Initialisation
\documentclass[
	fontsize=11pt
	headlines=2,
	footlines=2,
	parskip=half
]{scrartcl}

\usepackage[left=2.54cm,top=2.54cm,right=2.54cm,bottom=2.54cm,headheight=30pt]{geometry}

% Enforce UTF8 encoding
\usepackage[utf8]{inputenc}

% Colours
\usepackage[dvipsnames]{xcolor}

% Header and footer
\usepackage{scrlayer-scrpage}
\ohead{SENG4800A - Individual interim report \\ \today}
\cfoot{\pagemark}

% Document title and author
\title{Exploring 3D Geovisualisation Techniques and their Applications with Large Datasets using HTML5 and WebGL}
\author{Monica Olejniczak}

% Sections
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}
\usepackage[compact]{titlesec}
%\titlespacing{\paragraph}{0pt}{*0}{8pt}

% http://tex.stackexchange.com/questions/198830/section-title-with-runin-and-koma-class

% Abstract
\usepackage{abstract}
\setlength{\absleftindent}{0pt}
\setlength{\absrightindent}{0pt}
\renewcommand{\absnamepos}{flushleft}
\renewcommand{\abstractnamefont}{\normalfont\Large\bfseries}

% Links
\usepackage{hyperref}

% Todo notes
\usepackage{todonotes}
\presetkeys{todonotes}{inline}{}

% Gantt charts
\usepackage{pgfgantt}

% Tables
\usepackage{booktabs}
\usepackage{tabularx}
\renewcommand{\arraystretch}{1.5}
\setlength{\textfloatsep}{0.1em}

% Additional
\usepackage{float}
\usepackage{spreadtab}
\usepackage{etoolbox}
\usepackage{multicol}
\usepackage{caption} 
\usepackage{subcaption}
% Remove spacing before and after captions
\captionsetup[table]{aboveskip=-8pt}
\captionsetup[table]{belowskip=8pt}
\captionsetup[figure]{belowskip=-15pt}

% References
\usepackage[backend=bibtex,style=authoryear]{biblatex}
\addbibresource{references.bib}
\DeclareBibliographyCategory{exclude}
\newcommand{\bibentry}[1]{
	\addtocategory{exclude}{#1}
	\fullcite{#1}
}

% Appendices
\usepackage[toc,page]{appendix}

% Commands
\newcommand{\rating}[1]{
	\ifnumless{#1}{20 * 100} {Very low} {
		\ifnumless{#1}{40 * 100} {Low} {
			\ifnumless{#1}{60 * 100} {Medium} {
				\ifnumless{#1}{80 * 100} {High} {
					Very high
				}
           	}
		}
	}
}

\begin{document}

	% Title
	\makeatletter
		\begin{huge}
			\textbf{\textsf{\@title}}
		\end{huge}
	\makeatother
	\begin{abstract}
		\todo{Data visualisation is the presentation of data in a visual context and is particularly important in data analytics since humans are able to recognise patterns, trends and correlations more easily \parencite{grinstein2002introduction}.
		
		This project aims to develop touch-based visualisations in three-dimensions and will focus on using large data in a generic way to demonstrate general applicability. The visualisations will provide touch-capability so they are able to be viewed on a smart device.}
	\end{abstract}
	
	\section{Introduction} {
	\label{sec:introduction}

		Geovisualisation is the interactive visualisation of geospatial information, which is closely related to the fields of scientific and information visualisation \parencite{jiang2005geovisualization}. It is particularly important in data analytics and when working with large datasets, since it enables data exploration and decision-making processes when combined with human understanding \parencite{grinstein2002introduction, hendley1995case}. This is due to the addition of the geographical dimension in the visualisation process, which greatly facilitates the identification and interpretation of spatial patterns and relationships in complex data \parencite{kwan2004geovisualization}.
		
		This research discusses the World Wide Web as a platform for geovisualisations and its required interactions in a 3D environment. Next, the applications and visualisation techniques of geovisualisation are explored and the aims of this project are outlined. Then, the details of this project are discussed which include its goals, plan for development and schedule. Finally, this report concludes with the ethical issues that arise from developing this project.

		\subsection{The World Wide Web} {

			Geovisualisations can be realised through the World Wide Web, which has become a prominent medium for publishing geospatial data as they are no longer limited to a static form. Now, immersive and highly interactive environments can be created and taken advantage of to explore and present dynamic geospatial data \parencite{maceachren2001research}.

			\subsubsection{HTML5} {

				HTML5 is a standardised markup language for describing web documents \parencite{w3c2014html5}, providing a common platform for applications to deliver multimedia content to the web \parencite{lawson2011introducing, chaturvedi2015web}.

			}

			\subsubsection{WebGL} {

				WebGL is a cross-platform web standard for a 3D graphics API derived from OpenGL, which has been exposed through the HTML5 canvas element \parencite{marrin2011webgl} as a drawing context. It is widely supported in modern browsers, without needing additional plug-ins or extensions, and is designed for building dynamic applications that require 3D visualisations \parencite{chaturvedi2015web, marrin2011webgl, parisi2012webgl}. Rendering such visualisations in real-time is possible due to the accelerated graphics rendering provided by WebGL, which utilises the graphics card memory on a device \parencite{chaturvedi2015web} to perform multiple operations in parallel to one another.

			}

		}

		\subsection{Interaction} {

			The communication between a user and a system, otherwise known as \emph{interaction}, is an important aspect in geovisualisation. Interaction enables users to explore the data presented to them in order to uncover trends and allow for decision-making processes. It is also essential for a visualisation to support interaction, otherwise it becomes static and greatly limits its usefulness as the dataset that it represents grows larger \parencite{yi2007toward}.

			In the context of geovisualisation, the user should be able to navigate the visualisation itself and the synthetic geography that it represents. Navigation enables particular and pertinent information to be located more successfully and is considered to be one of the most important metaphors for dynamic cartography \parencite{cartwright2001geospatial}. The navigation of a geospatial representation requires the user to perform standard operations, which include: translate, scale, rotate, map projection, manipulation of the design representation parameters, level of generalisation and field of view \parencite{cartwright2001geospatial, hand1997survey}.

		}

		\subsection{Applications} {

			% equipped assist

			There is a comprehensive amount of geospatial data available, which has been made accessible through various digital data resources. Census enumerations, health statistics, land use categories, meteorological measurements, telephone information and transportation records constitute examples of geospatially referenced data that can be applied to geovisualisations for scientific, research and societal purposes. Furthermore, this widely accessible geospatial data has resulted in an equally large range of application domains for geovisualisations, which include earth science, public health and social science \parencite{maceachren2004geovisualization}.

			\todo{break up with image of each application}

			% Earth science
			In the domain of earth science, the visualisation of environmental data reveals new insights into the patterns of nature and human-related phenomena and helps improve understanding of the dynamic processes of earth systems \parencite{yu2012google}.

			\textcite{yu2012google} analyses virtual globes as a tool in earth science applications, which have been developed to effectively facilitate data collection, exploration and the visualisation of environmental data. They deliver huge volumes of satellite imagery, 3D views of the earth, topographic maps and distance measurement to the general public. These globes have promoted entertainment, education, the exploration of new findings, data sharing and provided researchers with effective channels of communicating their findings. Virtual globes can be applied to many areas and in the case of \emph{Google Earth}, typically focus on large-scale phenomena in the atmosphere, carbon science, ecosystems, energy, geology and natural disasters.

			% Public health
			Within public health, geovisualisations can be modelled to geospatial data concerning risk factors, health outcomes and interventions to provide an opportunity to understand and act on the varied geographic distribution of disease. However, these datasets are typically difficult to analyse through traditional methods as the data is highly multivariate \parencite{maceachren2004geovisualization}.

			\textcite{maceachren2004geovisualization} were able to apply a \emph{mortality and risk factor} dataset to a geovisualisation, in order to explore the spatial and nonspatial relationships in this data. They considered environmental risk factors, health care access and cancer mortality rates of various ages and genders to demonstrate that it is possible to utilise geovisualisations in a way that addresses critical issues in public health.

			% Social science

			\todo{human geography - population data}

			% \subsubsection{Urban planning} {

			% Geovisualisations are used as a tool for visualising the likely consequences of proposed developments by exploring their various scenarios. This has the potential to facilitate collaborative decision making by various stakeholders, improve communication and resolve conflicts at a community level \citep{pettit2005using}.

			% }

		}

		% \subsection{Challenges and issues} {

		% 	\todo{geospatial info visualisation -
		% 	geoagents - Can geovisualization products offer too much information? The Web enables access to vast stores of information,
		% 	much of it with geospatial referencing, thus Web-based geovisualization has the potential to
		% 	overwhelm users with a huge volume of unorganized information. The key question here is how can we
		% 	provide the “information filters” that avoid this overload and allow users to work with a myriad of information.}

		% }

		\subsection{Visualisation techniques} {

			\todo{nurbs}

		}

		\subsection{Overview} {

			\todo{reword section later}

			In this work, HTML5 and WebGL will be utilised to visualise geographical data, which ensures that this project is cross-platform and capable of rendering complex visualisations through accelerated graphics rendering. It will consider several navigation interaction techniques, particularly translation, scaling and rotation.

		}
	
	}
	
	\section{Project plan} {
	\label{sec:project_plan}
		
		This project will be developed in a web environment to ensure the creation of a platform independent system. It will primarily use \href{http://threejs.org/}{Three.js}, a JavaScript library that abstracts WebGL, as a tool for creating 3D visualisations. An initial prototype was designed and has been discussed in Appendix~\ref{app:current_progress}. The main \emph{goals} of this project are to:
		
		%\begin{multicols}{2}
		\begin{itemize}
			\item Visualise a large dataset in a time efficient manner.
			\item Ensure the visualisation is aesthetically pleasing and of high quality.
			\item Apply the visualisations to multiple datasets and ensure they are scalable. 
			\item Integrate the results into the group project.
			\item Explore how 3D visualisations can effectively convey information.
			\item Explore how to optimise calls and understand what drains processing resources easily.
			\begin{itemize}
				\item This can be measured with a \href{http://jsperf.com/}{JavaScript performance testing environment}.
			\end{itemize}
		\end{itemize}
		%\end{multicols}
		
		To facilitate these goals, this project will involve creating visualisations that are able to compared with one another. This will be done so it can be seen which visualisation is more effective at representing a dataset in particular applications. With this in mind, it has been decided that heat maps will be used as the basis of this project as they have a wide array of applications. Figure~\ref{fig:heat_maps} features two different ways of visualising a heat map. It has potential applications in displaying a 3D column or bar chart, financial and geographical data. It is interesting to note that geographical data can be applied to both visualisations, where the image on the left can be mapped to a sphere and could represent population data, while the other could represent pollution levels in a city.
		
		\begin{figure}[H]
			\centering
			\begin{subfigure}[b]{0.4\textwidth}
                \includegraphics[width=\textwidth,height=3.5cm]{images/heat-map-1}
	        \end{subfigure}
	        \begin{subfigure}[b]{0.4\textwidth}
                \includegraphics[width=\textwidth,height=3.5cm]{images/heat-map-2}
	        \end{subfigure}
			\caption{Two different representations of a heat map. \protect\footnotemark \protect\footnotemark}
			\label{fig:heat_maps}
		\end{figure}

		\footnotetext[1]{\bibentry{tuomainen2014financial}}
		\footnotetext{\bibentry{fuchs2006physiological}}
		
		The data for the visualisations can easily be represented as a flat array. It may or may not need to be preprocessed, as this depends on the format of the data. This data representation has also been adopted by \href{https://www.chromeexperiments.com/globe}{The WebGL Globe} Chrome Experiment, as shown in Appendix~\ref{app:globe}, is a great example of visualising big data in an efficient way. This open platform project clearly demonstrates that the goals of this project are achievable. They encourage users to use their own datasets, ensuring a certain level of scalability and applications with geographical data.
		
		The development of these visualisations will involve using the established \href{http://threejs.org/docs/#Reference/Extras.Geometries/BoxGeometry}{BoxGeometry} and NURBS surface that are available in Three.js. The \href{http://threejs.org/examples/webgl_geometry_nurbs.html}{NURBS example}, as displayed in Appendix~\ref{app:nurbs}, proves that it is possible to render a smooth 3D surface. This can be applied to represent a heat map and if there lie difficulties in implementing this, then an simpler representation can be modelled.

		\subsection{Dataset} {

			\todo{start with fake data, then move onto real data then to a live system (FYP)}
		
		}

		\subsection{Methodology} {


		}

		\subsection{Evaluation} {


		}

		\subsection{Deliverables} {

			\todo{This should be completed in three weeks and consists of the implementation for a single visualisation and interactions for panning, zooming and rotating.}

			\todo{These deliverables have been designated five weeks to complete. It includes the ability to filter data, apply the visualisation to one or more large datasets and the implementation of another visualisation.}

			\todo{This has been allotted one month to complete and it is a core requirement to integrate the data to the group project. Analysing the computational power and the scalability of the visualisations are considered to be more important than the other tasks and thus have been allocated more time.}

		}
		
		\subsection{Dependencies} {
		\label{sec:dependencies}
		
			\begin{table}[H]
			\caption{A list of project dependencies.}
			\begin{tabularx}{\textwidth}{@{}XX@{}}
				\toprule
				\textbf{Dependency} & \textbf{Description} \\
				\midrule
				BitBucket & Source code host \\
				SourceTree & Git client \\
				Node.js & Runtime environment \\
				Three.js & WebGL abstraction \\
				RequireJS & Dependency injection \\
				LaTeX & Typesetting \\
				\bottomrule
			\end{tabularx}
			\end{table}
		
		}
		
		\subsection{Risks} {
		\label{sec:risks}

			The following table outlines the risks associated with this project. A more detailed risk assessment can be found in Appendix~\ref{app:risk_assessment}.
			
			\begin{table}[H]
			\caption{The list of risks associated with this project and their appropriate mitigation strategies.}
			\begin{tabularx}{\textwidth}{@{}lp{0.35\linewidth}X@{}}
				\toprule
				\textbf{Id} & \textbf{Description} & \textbf{Strategy} \\
				\midrule
				1 & Deliverables are not completed by the deadline. & \emph{Reduction:} Adhere to the project schedule. \\
				2 & Hardware failure. & \emph{Reduction:} Hardware will be treated with care. \\
				3 & Hardware cannot efficiently process big data. & \emph{Reduction:} Make optimisations where possible. \\
				4 & Software platform cannot efficiently process big data. & \emph{Reduction and acceptance:} Determine what is considered big data for this platform to minimise risk. \\
				5 & Scope is too large. & \emph{Reduction:} Reasonable requirements are established in the proposal with the project supervisor. \\
				6 & Code is lost. & \emph{Reduction:} Version control is used with small commits to minimise the impact of loss. \\
				7 & Project cannot be integrated to the group project. & \emph{Reduction:} Allocate enough time to this and contribute to the group through other means. \\
				8 & Project is not useful or applicable to the group. & \emph{Reduction and acceptance} Discuss and confirm applicability with the group and project supervisor before commencing. Alter the visualisation when required. \\
				\bottomrule
			\end{tabularx}
			\end{table}
		
		}
	
	}
	
	\section{Project schedule} {
	\label{sec:project_schedule}
	
		The project plan, which was outlined in Section~\ref{sec:project_plan}, is to be completed according to the project schedule. Unfortunately, it is quite probable that no work will be undertaken towards the individual project during the mid-year recess. This is due to the need to prepare for and attend RoboCup 2015, China. It has therefore been omitted from the schedule, which has been demonstrated through the Gantt chart in Figure~\ref{fig:schedule}.

		\begin{figure}[H]
	        \makebox[\textwidth][c]{\resizebox{0.95\paperwidth}{!}{\input{gantt.tex}}}
			\caption[Project schedule] {A Gantt chart illustrating the project schedule. Purple bars indicate group tasks, while blue bars refer to individual work with grey being an optional task.}
			\label{fig:schedule}
		\end{figure}
		
	}
	
	\section{Ethical issues} {
	\label{sec:ethical_issues}
		
		The data used to model the visualisations have the potential to lead to ethical issues by containing personal data or copyrighted information.
		
		\subsection{Personal data} {
		\label{sec:personal_data}
		
			Personal data is information that is able to identify a person and could be obtained when this project is integrated with the final year group project. It is necessary to log user information in order to obtain the data required to display the visualisations. Users must:
			
			\begin{itemize}
				\item Remain informed of how the data is stored, preserved and used. 
				\item Consent to the storage of this information.
				\item Be informed of how confidentiality will be maintained.
			\end{itemize}
			
			The research data should be anonymised, to increase confidentiality, so individuals cannot be identified from the data. This can be achieved by recording different users with an arbitrary value such as a colour or unique identifier, instead of their name or student number. It is also feasible to not record this data at all and simply just store the values associated with their touches.
		
		}
		
		\subsection{Copyrighted information} {
		\label{sec:copyright}
		
			This poses as an issue when the data used for the visualisation is extracted from an external source. The data should be under a public copyright licence to ensure that there are no copyright infringements when applying it to the project.
			
			A possible solution to this issue is to instead generate fake data. This will see the benefit of viewing the visualisation under a large dataset, removing any concern over copyright issues. However, the visualisation will not display real information and the generated data may appear too random. This data could be generated within a program or by using free online tools.
		
		}
	
	}

	\begin{small}
		\printbibliography[notcategory=exclude]
	\end{small}
	
	\newpage
	
	\begin{appendices}
	
		\section{Current progress} {
		\label{app:current_progress}
		
			Initially, this project was inspired by the visualisation of flight paths as shown in Figure~\ref{fig:flight_paths}. These flight paths could instead represent touch-gestures that could be integrated into the group project. A proof of concept of this visualisation was developed to test the capabilities of the Three.js library.
			
			\begin{figure}[H]
        		\href{http://nats.aero/blog/2014/03/europe-24-air-traffic-data-visualisation/}{\includegraphics[width=\textwidth]{images/flight-paths}}
				\caption{Air traffic data visualisation. \protect\footnotemark}
				\label{fig:flight_paths}
			\end{figure}

			\footnotetext{\bibentry{nats2014air}}
			
			The format of the data needed to be confirmed before generating it. To do this, a test runner was created to evaluate any performance differences in reading and parsing array data as opposed to objects. The results of this test, which are demonstrated in Figure~\ref{fig:performance_test}, conclude that reading and parsing array data is far more efficient.
			
			\begin{figure}[H]
        		\href{http://jsperf.com/object-and-array-reading}{\includegraphics[width=\textwidth,height=8.5cm]{images/performance-test}}
				\caption{The results of the performance test.}
				\label{fig:performance_test}
			\end{figure}
			
			Lines are incredibly difficult to draw in WebGL \footnote{\bibentry{deslauriers2015lines}} and was the first challenge when attempting to develop this visualisation. There are two main methods of rendering a line using the Three.js library: 
			
			\begin{description}
				\item[Line Object:] The default thickness of the line is too thin to highlight intersections with alpha blending. To resolve this, the \emph{lineWidth} property should be used. However, it is not supported in Windows which limits the availability of the system.
				\item[TubeGeometry:] This geometry does not render acute angles accurately and results in a thinner and deformed tube structure. It also does not shade intersecting tubes correctly, which is highlighted in Figure~\ref{fig:tube_geometry}. While the code could be modified through a pull request, this would be too time consuming as the mathematics behind it is very complex and would need to be learned.
			\end{description}
			
			\begin{figure}[H]
        		\includegraphics[width=\textwidth]{images/tube-geometry}
				\caption{The issues with TubeGeometry.}
				\label{fig:tube_geometry}
			\end{figure}
			
			The visualisation did provide relatively good results which have been presented in Figure~\ref{fig:proof_of_concept}. However, when closely inspected the issues with its finer details were too prominent. Given the difficulty of amending the issues that arise when rendering a line, this idea was scrapped.
			
			\begin{figure}[H]
        		\includegraphics[width=\textwidth]{images/proof-of-concept}
				\caption{An example of the visualisation that was developed.}
				\label{fig:proof_of_concept}
			\end{figure}
		
		}
		
		\newpage
	
		\section{Examples} {
		\label{app:examples}
		
			\subsection{WebGL Globe} {
			\label{app:globe}
		
				\begin{figure}[H]
        			\href{https://www.chromeexperiments.com/globe}{\includegraphics[width=\textwidth]{images/globe}}
					\caption{A screenshot of the WebGL Globe representing population data. \protect\footnotemark}
					\label{fig:webgl_globe}
				\end{figure}

				\footnotetext{\bibentry{google2011globe}}
		
			}
		
			\subsection{NURBS curve and surface} {
			\label{app:nurbs}		
		
				\begin{figure}[H]
        			\href{http://threejs.org/examples/webgl_geometry_nurbs.html}{\includegraphics[width=\textwidth]{images/nurbs}}
					\caption{A screenshot of the NURBS curve and surface example.}
					\label{fig:nurbs}
				\end{figure}
		
			}
			
		}
		
		\newpage
		
		\section{Risk assessment} {
		\label{app:risk_assessment}
		
			\subsection{Category legend} {
			\label{app:category_legend}
			
				\begin{table}[H]
				\caption{A list of the categories used in the risk assessment.}
				\begin{tabularx}{\textwidth}{@{}lX@{}}
					\toprule
					\textbf{Risk category} & \textbf{Examples} \\
					\midrule
					Project management & Operational, organisational and contractual software development parameters. \\
					Process management & Planning, staffing, tracking, quality assurance and configuration management. \\
					Technical process & Analysis, design, programming and testing. \\
					Technical product & Requirements stability, design performance, code complexity and test specifications. \\
					\bottomrule
				\end{tabularx}
				\end{table}
			
			}
			
			\subsection{Strategy legend} {
			\label{app:strategy_legend}

				\begin{table}[H]
				\caption{A list of the risk strategies used in the risk assessment.}
				\begin{tabularx}{\textwidth}{@{}lX@{}}
					\toprule
					\textbf{Risk strategy} & \textbf{Description} \\
					\midrule
					Acceptance & The risk is acceptable and will be account for. \\
					Avoidance & An activity will not be performed if it may result in a risk. \\
					Reduction & The severity of the impact or the likelihood of the risk will be reduced. \\
					Research & The risk will be investigated so it can be managed. \\
					Transfer & The risk is shifted to or outsourced to another person, group or organisation. \\
					\bottomrule
				\end{tabularx}
				\end{table}

			}

			\subsection{Risk rating legend} {
			\label{app:risk_rating_legend}

				\begin{table}[H]
				\caption{The mapping between the priority score and its associated risk rating.}
				\begin{tabularx}{\textwidth}{@{}XX@{}}
					\toprule
					\textbf{Priority score} & \textbf{Risk rating} \\
					\midrule
					0 - 19 & Very low \\
					20 - 39 & Low \\
					40 - 59 & Medium \\
					60 - 79 & High \\
					80 - 100 & Very high \\
					\bottomrule
				\end{tabularx}
				\end{table}

			}
			
			\subsection{Risk details} {
			\label{app:risk_details}
			
				\begin{table}[H]
				\caption{The details of the risks that were outlined in Section~\ref{sec:risks}.}
				\begin{spreadtab}{{tabularx}{\textwidth}{@{}llXXXX@{}}}
					\toprule
					@\textbf{Id} & @\textbf{Category} & @\textbf{Likelhood} & @\textbf{Impact} & @\textbf{Score} & @\textbf{Rating} \\
					\midrule
					1 & @Project management & :={35}\% & 95 & (c2 / 100) * d2 & \rating{:={e2 * 100}} \\
					2 & @Technical product & :={10}\% & 80 & (c3 / 100) * d3 & \rating{:={e3 * 100}} \\
					3 & @Technical product & :={10}\% & 100 & (c4 / 100) * d4 & \rating{:={e4 * 100}} \\
					4 & @Technical product & :={60}\% & 100 & (c5 / 100) * d5 & \rating{:={e5 * 100}} \\
					5 & @Process management & :={5}\% & 85 & (c6 / 100) * d6 & \rating{:={e6 * 100}} \\
					6 & @Technical process & :={1}\% & 75 & (c7 / 100) * d7 & \rating{:={e7 * 100}} \\
					7 & @Technical product & :={20}\% & 85 & (c8 / 100) * d8 & \rating{:={e8 * 100}} \\
					8 & @Technical product & :={20}\% & 85 & (c9 / 100) * d9 & \rating{:={e9 * 100}} \\
					\bottomrule
				\end{spreadtab}
				\end{table}
			
			}
		
		}
		
	\end{appendices}
	
\end{document}
